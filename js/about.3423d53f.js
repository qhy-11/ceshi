"use strict";(self["webpackChunkopenlayers_vue3"]=self["webpackChunkopenlayers_vue3"]||[]).push([[443],{570:function(e,i,a){a.r(i),a.d(i,{default:function(){return M}});var r=a(252),t=a(577);const n={id:"cesiumContainer"},s={class:"locationBar"};function o(e,i,a,o,l,c){const d=(0,r.up)("mapLayers"),m=(0,r.up)("toolFunctions");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(d,{onAddMapLayers:c.addMapLayers},null,8,["onAddMapLayers"]),(0,r.Wm)(m),(0,r._)("div",s,(0,t.zw)(`经度：${this.longitude}, 纬度：${this.latitude}, 视高: ${this.height}米 `),1)])}const l=e=>((0,r.dD)("data-v-1bc04da0"),e=e(),(0,r.Cn)(),e),c={class:"mapLayers"},d=l((()=>(0,r._)("div",{class:"title"},"图层管理",-1)));function m(e,i,a,t,n,s){const o=(0,r.up)("el-tree");return(0,r.wg)(),(0,r.iD)("div",c,[d,(0,r.Wm)(o,{data:n.dataTree,"show-checkbox":"","node-key":"id",ref:"tree","default-checked-keys":[5],"default-expanded-keys":[1],props:e.defaultProps,onCheck:s.getCheckedNodes},null,8,["data","props","onCheck"])])}var u={name:"mapLayers",data(){return{dataTree:[{id:1,label:"单张图片服务图层",children:[{id:5,label:"夜景图片"}]},{id:2,label:"在线天地图服务图层",children:[{id:6,label:"天地图矢量图层"},{id:7,label:"天地图矢量标注图层"},{id:8,label:"天地图影像图层"},{id:9,label:"天地图影像标注图层"}]},{id:3,label:"ArcGis在线地图服务图层",children:[{id:10,label:"ArcGis Online图层"},{id:11,label:"ArcGis 深色图层"}]},{id:4,label:"高德在线地图服务图层",children:[{id:12,label:"高德在线矢量图层"},{id:13,label:"高德在线影像图层"}]}]}},methods:{getCheckedNodes(e,i){const a=[];i.checkedNodes.forEach((e=>{a.push(e.label)}));const r=a.filter((e=>{if(-1===e.indexOf("服务"))return e}));let t=[],n=[],s=[],o=[];r.forEach((e=>{e.indexOf("图片")>-1?t.push(e):e.indexOf("天地图")>-1?s.push(e):e.indexOf("ArcGis")>-1?n.push(e):e.indexOf("高德")>-1&&o.push(e)}));const l={singleMap:t,arcGis:n,tdt:s,amap:o};this.$emit("addMapLayers",l)}}},g=a(744);const h=(0,g.Z)(u,[["render",m],["__scopeId","data-v-1bc04da0"]]);var p=h;const v={class:"tools"};function C(e,i,a,t,n,s){return(0,r.wg)(),(0,r.iD)("div",v,"TOOLfUNCTION")}var y={name:"toolFunctions"};const f=(0,g.Z)(y,[["render",C],["__scopeId","data-v-00f20138"]]);var w=f;let b;var I={name:"CesiumView",components:{mapLayers:p,toolFunctions:w},data(){return{longitude:"",latitude:"",height:""}},mounted(){this.initMap(),this.createEntity()},methods:{initMap(){var e=a(710);return Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyNDBiMjBhOS1jZWE5LTRmYWYtOGI3Yy05ZDg3ODBiZDZiZjUiLCJpZCI6MjU5LCJpYXQiOjE2NTkzNjE0MTJ9.tXPPvw93XpCGHG71h7s_mMLlWGCuAL55o8LC309hLAg",new Promise((()=>{b=new Cesium.Viewer("cesiumContainer",{baseLayerPicker:!1,homeButton:!1,imageryProvider:new Cesium.SingleTileImageryProvider({rectangle:Cesium.Rectangle.fromDegrees(-180,-90,180,90),url:e})})}))},createEntity(){const e=new Cesium.Material({fabric:{uniforms:{},source:"\n            czm_material czm_getMaterial(czm_materialInput materialInput) {\n              czm_material material = czm_getDefaultMaterial(materialInput);\n              material.diffuse = vec3(materialInput,0.0);\n              // material.alpha = 0.5;\n              return material;\n            }\n          "}});console.log(e),console.log(e.shaderSource);b.entities.add({rectangle:{coordinates:Cesium.Rectangle.fromDegrees(90,20,110,30),material:e}});const i=new Cesium.RectangleGeometry({rectangle:Cesium.Rectangle.fromDegrees(115,20,135,30),height:0,vertexFormat:Cesium.PerInstanceColorAppearance.VERTEX_FORMAT}),a=new Cesium.GeometryInstance({geometry:i,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.RED.withAlpha(.5))}}),r=new Cesium.Primitive({geometryInstances:a,appearance:new Cesium.MaterialAppearance({material:e})});b.scene.primitives.add(r)},getposition(){const e=this,i=new Cesium.ScreenSpaceEventHandler(e.viewer.scene.canvas);e.height=e.viewer.camera.positionCartographic.height.toFixed(2),e.viewer.camera.moveEnd.addEventListener((()=>{e.height=e.viewer.camera.positionCartographic.height.toFixed(2)})),i.setInputAction((function(i){const a=e.viewer.camera.pickEllipsoid(i.endPosition,e.viewer.scene.globe.ellipsoid);if(a||!e.height){const i=Cesium.Cartographic.fromCartesian(a);e.longitude=Cesium.Math.toDegrees(i.longitude).toFixed(6),e.latitude=Cesium.Math.toDegrees(i.latitude).toFixed(6),e.height=e.viewer.camera.positionCartographic.height.toFixed(2);Number(e.viewer.scene.camera.pitch).toFixed(2),Number(e.viewer.scene.camera.heading).toFixed(2)}}),Cesium.ScreenSpaceEventType.MOUSE_MOVE)},createLocationBar(){const e=document.getElementById("cesiumContainer").childNodes[1],i=document.createElement("div");console.log(e,i),i.className="locationBar",i.style="\n      position: absolute;\n \n  width:100%;\n  height:40px;\n  background-color: rgba(0,0,0,0.5);\n  color: #fff;\n  font-size: 14px;\n  line-height: 40px;\n  text-align: center;\n  z-index: 100;",i.innerHTML=`经度：${this.longitude}, 纬度：${this.latitude}, 视高: ${this.height}米 `,e.appendChild(i)},clearAllMap(e){this.viewer.scene.globe.imageryLayers.removeAll(),console.log(this.viewer.scene.globe.imageryLayers._layers)},addMapLayers(e){if(console.log(e),e.singleMap.length>0){const e=new Cesium.ImageryLayer(new Cesium.SingleTileImageryProvider({rectangle:Cesium.Rectangle.fromDegrees(-180,-90,180,90),url:a(710)}));this.viewer.scene.globe.imageryLayers.add(e)}else 0===e.singleMap.length&&this.viewer.scene.globe.imageryLayers.removeAll();e.arcGis.length>0?e.arcGis.forEach((e=>{if(e.indexOf("Online")>-1){const e=new Cesium.ImageryLayer(new Cesium.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}));this.viewer.scene.globe.imageryLayers.add(e)}if(e.indexOf("深色")>-1){const e=new Cesium.ImageryLayer(new Cesium.ArcGisMapServerImageryProvider({url:"http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer"}));this.viewer.scene.globe.imageryLayers.add(e)}})):0===e.arcGis.length&&this.viewer.scene.globe.imageryLayers.removeAll()}}};const L=(0,g.Z)(I,[["render",o],["__scopeId","data-v-54c6c12c"]]);var M=L},710:function(e,i,a){e.exports=a.p+"img/singleMap.06fd10a3.jpg"}}]);
//# sourceMappingURL=about.3423d53f.js.map